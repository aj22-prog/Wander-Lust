<% layout("layouts/boilerplate") %>

<body>
  <h3 class="text-center my-4">All Listings</h3>

  <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1 g-4 px-3">
    <% for (let listing of alllisting) { %>
      <div class="col">
        <div class="card h-100 shadow-sm">
          <img
            src="<%= listing.image?.url || '/images/default.jpg' %>"
            class="card-img-top"
            alt="<%= listing.title %>"
            style="height: 20rem; object-fit: cover;"
          />
          <div class="card-body d-flex flex-column justify-content-between">
            <div>
              <h5 class="card-title text-truncate"><%= listing.title %></h5>
              <p class="card-text mb-2">
                &#8377; <%= listing.price ? listing.price.toLocaleString("en-IN") : "N/A" %> / night
              </p>
            </div>
            <a href="/listing/<%= listing._id %>" class="btn btn-primary mt-auto">View Details</a>
          </div>
        </div>
      </div>
    <% } %>
  </div>
</body>